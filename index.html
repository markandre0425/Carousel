<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Family Carousel</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Pangolin&display=swap" rel="stylesheet">
</head>
<body>
  <div class="ambient-background" aria-hidden="true">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
    <div class="noise-overlay"></div>
  </div>
<audio id="valentine-audio" preload="none" loop src="audio/valentine.mp3" aria-hidden="true"></audio>

<div class="valentine-intro" id="valentine-intro">
  <div class="container" id="envelope-container">
    <div class="envelope"></div>
    <div class="card">
      <h1 class="message">WILL YOU BE MY VALENTINE :) ?</h1>
      <div class="reindeer">
        <div class="face"></div>
        <div class="antlers"></div>
        <div class="antlers right"></div>
        <div class="ear"></div>
        <div class="ear left"></div>
      </div>
    </div>
    <div class="cover"></div>
    <div class="lid"></div>
    <div class="shadow"></div>
  </div>
  <button type="button" class="enter-btn" id="enter-btn" aria-label="See my valentine">Be My Valentine ♥</button>
</div>

<div class="main-carousels" id="main-carousels" hidden>
<div class="carousel-section">
<section class="wrapper">
	<div class="center-image" id="center-image" aria-hidden="true"></div>
	<div id="item-1" style="--i:1">
  	<a href="#item-1"><img src="images/Untitled design (3).png" alt="" loading="eager" decoding="async"></a>
  </div>
  
	<div id="item-2" style="--i:2">
  	<a href="#item-2"><img src="images/Untitled design (4).png" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-3" style="--i:3">
  	<a href="#item-3"><img src="images/Untitled design (10).png" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-4" style="--i:4">
  	<a href="#item-4"><img src="images/Untitled design (13).png" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-5" style="--i:5">
  	<a href="#item-5"><img src="images/Untitled design (15).png" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-6" style="--i:6">
  	<a href="#item-6"><img src="images/IMG_7417.JPG" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-7" style="--i:7">
  	<a href="#item-7"><img src="images/IMG_7418.JPG" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-8" style="--i:8">
  	<a href="#item-8"><img src="images/IMG_7517.JPG" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-9" style="--i:9">
  	<a href="#item-9"><img src="images/RS_01153.JPG" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-10" style="--i:10">
  	<a href="#item-10"><img src="images/RS_01161.JPG" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-11" style="--i:11">
  	<a href="#item-11"><img src="images/RS_01162.JPG" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-12" style="--i:12">
  	<a href="#item-12"><img src="images/RS_01165.JPG" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-13" style="--i:13">
  	<a href="#item-13"><img src="images/RS_01177.JPG" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-14" style="--i:14">
  	<a href="#item-14"><img src="images/RS_01184.JPG" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-15" style="--i:15">
  	<a href="#item-15"><img src="images/RS_01193.JPG" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-16" style="--i:16">
  	<a href="#item-16"><img src="images/RS_01206.JPG" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-17" style="--i:17">
  	<a href="#item-17"><img src="images/RS_01216.JPG" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-18" style="--i:18">
  	<a href="#item-18"><img src="images/Wife13.png" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-19" style="--i:19">
  	<a href="#item-19"><img src="images/Wife11.png" alt="" loading="lazy" decoding="async"></a>
  </div>
  
	<div id="item-20" style="--i:20">
    <a href="#item-20"><img src="images/Wife10.png" alt="" loading="lazy" decoding="async"></a>
  </div>
	<h1>Family Carousel</h1>
</section>
</div>

<div class="arc-section" id="arc-section">
  <button type="button" class="arc-reveal-btn" id="arc-reveal-btn" aria-expanded="false" aria-controls="arc-carousel">See Memories ♥</button>
  <div class="arc-carousel" id="arc-carousel" hidden>
    <div><img data-src="images/Wife8.png" alt="" loading="lazy" decoding="async"></div>
    <div><img data-src="images/Wife1.png" alt="" loading="lazy" decoding="async"></div>
    <div><img data-src="images/Wife2.png" alt="" loading="lazy" decoding="async"></div>
    <div><img data-src="images/Wife6.png" alt="" loading="lazy" decoding="async"></div>
    <div><img data-src="images/Wife7.png" alt="" loading="lazy" decoding="async"></div>
    <div><img data-src="images/Wife9.png" alt="" loading="lazy" decoding="async"></div>
    <div><img data-src="images/Wife12.png" alt="" loading="lazy" decoding="async"></div>
  </div>
</div>
</div>

<script src="envelope.js"></script>
<script>
(function() {
  var section = document.querySelector('.carousel-section');
  var centerEl = document.getElementById('center-image');
  if (!section) return;
  var totalItems = 20;
  var autoplayDelay = 4000;
  var autoplayTimer = null;

  function setCenterImage(id) {
    if (!centerEl) return;
    var el = document.getElementById(id);
    var img = el && el.querySelector('a[href^="#item-"] img');
    if (img && img.src) {
      centerEl.style.backgroundImage = "url('" + img.src + "')";
    }
  }

  function setActive(id) {
    document.body.dataset.familyActive = id;
    setCenterImage(id);
  }

  function nextItem() {
    var current = document.body.dataset.familyActive || 'item-1';
    var num = parseInt(current.replace('item-', ''), 10) || 1;
    num = num >= totalItems ? 1 : num + 1;
    setActive('item-' + num);
  }

  function startAutoplay() {
    if (autoplayTimer) clearInterval(autoplayTimer);
    autoplayTimer = setInterval(nextItem, autoplayDelay);
  }

  section.addEventListener('click', function(e) {
    var a = e.target.closest('a[href^="#item-"]');
    if (!a) return;
    e.preventDefault();
    var id = a.getAttribute('href').slice(1);
    setActive(id);
    startAutoplay();
  });

  var hash = window.location.hash.slice(1);
  if (/^item-\d+$/.test(hash)) {
    setActive(hash);
  } else {
    setActive('item-1');
  }

  document.addEventListener('carousels-visible', function() {
    setActive(document.body.dataset.familyActive || 'item-1');
    startAutoplay();
  });

  /* Arc gallery: load images and show only when user clicks "See our gallery" */
  var arcSection = document.getElementById('arc-section');
  var arcRevealBtn = document.getElementById('arc-reveal-btn');
  var arcCarousel = document.getElementById('arc-carousel');
  if (arcRevealBtn && arcCarousel) {
    arcRevealBtn.addEventListener('click', function() {
      if (arcSection.classList.contains('arc-expanded')) {
        arcSection.classList.remove('arc-expanded');
        arcRevealBtn.setAttribute('aria-expanded', 'false');
        arcRevealBtn.textContent = 'See Memories ♥';
        arcCarousel.hidden = true;
      } else {
        arcCarousel.querySelectorAll('img[data-src]').forEach(function(img) {
          if (img.dataset.src) { img.src = img.dataset.src; img.removeAttribute('data-src'); }
        });
        arcSection.classList.add('arc-expanded');
        arcRevealBtn.setAttribute('aria-expanded', 'true');
        arcRevealBtn.textContent = 'Hide Memories ♥';
        arcCarousel.hidden = false;
      }
    });
  }
})();
</script>
</body>
</html>